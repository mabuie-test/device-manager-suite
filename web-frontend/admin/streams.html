<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Streams</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:16px}
    li{margin-bottom:12px}
  </style>
</head>
<body>
<h1>Streams</h1>
<ul id="list"></ul>
<script>
async function load(){
  const token = localStorage.getItem('auth_token');
  const res = await fetch('/api/streams', { headers: { 'Authorization': 'Bearer ' + token }});
  const data = await res.json();
  const ul = document.getElementById('list');
  if (!data.ok) { ul.innerHTML = '<li>Erro ao listar</li>'; return; }
  data.files.forEach(f => {
    const li = document.createElement('li');
    li.innerHTML = `${f.filename} (${f.size} bytes) 
      <a href="/api/streams/download/${encodeURIComponent(f.filename)}" target="_blank">Download</a>
      <br/><audio controls src="/api/streams/download/${encodeURIComponent(f.filename)}"></audio>`;
    ul.appendChild(li);
  });
}
load();
</script>
</body>
</html>
